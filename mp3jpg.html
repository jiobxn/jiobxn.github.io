<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>音频图片播放器</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        .player-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .image-container {
            position: relative;
            width: 100vw;
            height: calc(100vh - 60px);
            padding-top: 5px;
            box-sizing: border-box;
            overflow: hidden;
        }
        #current-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 40px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            cursor: pointer;
            user-select: none;
        }
        .left-arrow {
            left: 10px;
        }
        .right-arrow {
            right: 10px;
        }
        audio {
            width: 100%;
            padding: 0 20px; /* 左右padding各20px */
            box-sizing: border-box;
            height: 60px;
            margin: 0;
            outline: none; /* 移除焦点轮廓 */
            user-select: none; /* 禁止选择 */
        }
    </style>
</head>
<body>
    <div class="player-container">
        <div class="image-container">
            <img id="current-image" src="1.jpg" alt="当前图片">
            <div class="arrow left-arrow" onclick="prevImage()">◄</div>
            <div class="arrow right-arrow" onclick="nextImage()">►</div>
        </div>
        <audio id="audio-player" controls>
            <source src="1.m4a" type="audio/mp4">
            你的浏览器不支持音频播放。
        </audio>
    </div>

    <script>
        const audio = document.getElementById('audio-player');
        const image = document.getElementById('current-image');
        
        const images = [
            '1.jpg', '2.jpg', '3.jpg', '4.jpg', '5.jpg', '6.jpg',
            '7.jpg', '8.jpg', '9.jpg', '10.jpg', '11.jpg', '12.jpg',
        ];
        let currentIndex = 0;

        // 切换图片
        function prevImage() {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            image.src = images[currentIndex];
        }
        function nextImage() {
            currentIndex = (currentIndex + 1) % images.length;
            image.src = images[currentIndex];
        }

        // 按回车键或空格键播放/暂停
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                if (audio.paused) {
                    audio.play();
                } else {
                    audio.pause();
                }
            }
        });

        // 防止音频元素获得焦点
        audio.addEventListener('focus', () => {
            audio.blur(); // 立即失去焦点
        });

        // 点击进度条跳转到正确时间
        audio.addEventListener('click', (event) => {
            const rect = audio.getBoundingClientRect();
            const offsetX = event.clientX - rect.left; // 点击位置相对音频左边缘的距离
            const paddingLeft = 20; // 左padding
            const paddingRight = 20; // 右padding
            const effectiveWidth = rect.width - paddingLeft - paddingRight; // 有效宽度
            const clickPosition = offsetX - paddingLeft; // 调整后的点击位置

            if (clickPosition >= 0 && clickPosition <= effectiveWidth) {
                const ratio = clickPosition / effectiveWidth; // 点击位置比例
                const duration = audio.duration || 0; // 音频总时长
                audio.currentTime = ratio * duration; // 设置跳转时间
            }
        });
    </script>
</body>
</html>
